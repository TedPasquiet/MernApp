"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_github_feature-callout-element_ts"],{3447:(e,t,r)=>{r.d(t,{D:()=>i,P:()=>a});var n=r(46263);function a(e=0,t={}){return(r,a,i)=>{if(!i||"function"!=typeof i.value)throw Error("debounce can only decorate functions");let o=i.value;i.value=(0,n.P)(o,e,t),Object.defineProperty(r,a,i)}}function i(e=0,t={}){return(r,a,i)=>{if(!i||"function"!=typeof i.value)throw Error("debounce can only decorate functions");let o=i.value;i.value=(0,n.D)(o,e,t),Object.defineProperty(r,a,i)}}},46263:(e,t,r)=>{function n(e,t=0,{start:r=!0,middle:n=!0,once:a=!1}={}){let i,o=0,s=!1;function l(...c){if(s)return;let u=Date.now()-o;o=Date.now(),r?(r=!1,e.apply(this,c),a&&l.cancel()):(n&&u<t||!n)&&(clearTimeout(i),i=setTimeout(()=>{o=Date.now(),e.apply(this,c),a&&l.cancel()},n?t-u:t))}return l.cancel=()=>{clearTimeout(i),s=!0},l}function a(e,t=0,{start:r=!1,middle:a=!1,once:i=!1}={}){return n(e,t,{start:r,middle:a,once:i})}r.d(t,{D:()=>a,P:()=>n})},88285:(e,t,r)=>{r.r(t);var n=r(76006),a=r(44544),i=r(3447),o=function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};let{getItem:s,setItem:l}=(0,a.Z)("localStorage"),c=class FeatureCalloutElement extends HTMLElement{async connectedCallback(){this.bootstrapFromLocalStorage()||await this.bootstrapFromServer()}bootstrapFromLocalStorage(){let e=s(this.localStorageKey);return!!e&&(this.bootstrap(JSON.parse(e)),!0)}get localStorageKey(){return`${this.localStoragePrefix}:${this.featureName}`}async bootstrapFromServer(){try{let e=await fetch(this.queryPath,{method:"GET",headers:this.fetchHeaders}),t=await e.text();if(!e.ok)throw Error(`unexpected response status ${e.status}: '${t}'`);let r=JSON.parse(t);return this.bootstrap(r),r.dismissed&&l(this.localStorageKey,t),!0}catch(e){throw Error(`failed to get feature state from server: ${e}`)}return!1}bootstrap(e){if(!("dismissed"in e)||null===e.dismissed)throw Error(`malformed response, likely no notice configured: '${JSON.stringify(e)}'`);e.dismissed||(this.applyTargetDefaults(),this.showCallout(),this.dismisser.addEventListener(this.dismissEvent,this.handleDismissal.bind(this),{once:!0}),this.detectAndBindToTabContainer())}detectAndBindToTabContainer(){let e=this.querySelector("tab-container");e&&e.addEventListener("tab-container-changed",e=>{e.detail&&e.detail.relatedTarget&&e.detail.relatedTarget.getAttribute("aria-labelledby")===this.dismisser.id&&this.handleDismissal()})}labeleesPresent(){return this.labelees.length>0}applyTargetDefaults(){if(!this.firstElementChild||this.labeleesPresent()&&this.dismisser)return;let e=this.firstElementChild.getAttribute("data-target")||"";this.labeleesPresent()||(e=e.concat(" feature-callout.labelees")),this.dismisser||(e=e.concat(" feature-callout.dismisser")),this.firstElementChild.setAttribute("data-target",e)}handleDismissal(){this.submitForm(),l(this.localStorageKey,'{"dismissed":true}')}showCallout(){for(let e of this.labelees)e.classList.add(this.labelClass)}async submitForm(){let e=this.dismissalForm;if(e)try{let t=await fetch(e.action,{method:e.method,body:new FormData(e),headers:this.fetchHeaders});if(!t.ok)throw Error(`unexpected response status ${t.status}: ${await t.text()}`)}catch(e){throw Error(`failed to persist dismissal to server: ${e}`)}}constructor(...e){super(...e),this.localStoragePrefix="feature-callout",this.fetchHeaders={"X-Requested-With":"XMLHttpRequest"},this.dismissEvent="click",this.labelClass="new-feature-label"}};o([n.GO],c.prototype,"labelees",void 0),o([n.fA],c.prototype,"dismisser",void 0),o([n.fA],c.prototype,"dismissalForm",void 0),o([n.Lj],c.prototype,"queryPath",void 0),o([n.Lj],c.prototype,"featureName",void 0),o([n.Lj],c.prototype,"enabled",void 0),o([n.Lj],c.prototype,"dismissEvent",void 0),o([n.Lj],c.prototype,"labelClass",void 0),o([(0,i.P)(1,{once:!0})],c.prototype,"handleDismissal",null),c=o([n.Ih],c)},4412:(e,t,r)=>{r.d(t,{C:()=>i,x:()=>a});var n=r(86283);let a=n.n4?.readyState==="interactive"||n.n4?.readyState==="complete"?Promise.resolve():new Promise(e=>{n.n4?.addEventListener("DOMContentLoaded",()=>{e()})}),i=n.n4?.readyState==="complete"?Promise.resolve():new Promise(e=>{n.iG?.addEventListener("load",e)})},53729:(e,t,r)=>{r.d(t,{A7:()=>d,ko:()=>c,q1:()=>s});var n=r(15205),a=r(86283);let i=(0,n.Z)(o);function o(){return a.n4?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}let s=(0,n.Z)(l);function l(){return a.n4?.head?.querySelector('meta[name="is-private-instance"]')?.content==="true"}let c=(0,n.Z)(u);function u(){return"enterprise"===i()}let d="webpack"},44544:(e,t,r)=>{r.d(t,{Z:()=>o,_:()=>s});var n=r(86283),a=r(71643);let i=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function o(e,t={throwQuotaErrorsOnSet:!1},r=n.iG,o=e=>e,s=e=>e){let l;try{if(!r)throw Error();l=r[e]||new i}catch{l=new i}let{throwQuotaErrorsOnSet:c}=t;function u(e){t.sendCacheStats&&(0,a.b)({incrementKey:e})}function d(e){try{if(l.removeItem(e),t.ttl){let t=`${e}:expiry`;l.removeItem(t)}}catch(e){}}return{getItem:function(e,t=new Date().getTime()){try{let r=l.getItem(e);if(!r)return null;let n=`${e}:expiry`,a=Number(l.getItem(n));if(a&&t>a)return d(e),d(n),u("SAFE_STORAGE_VALUE_EXPIRED"),null;return u("SAFE_STORAGE_VALUE_WITHIN_TTL"),o(r)}catch(e){return null}},setItem:function(e,r,n=new Date().getTime()){try{if(l.setItem(e,s(r)),t.ttl){let r=`${e}:expiry`,a=n+t.ttl;l.setItem(r,a.toString())}}catch(e){if(c&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:d,clear:l.clear,key:l.key,get length(){return l.length}}}function s(e){return o(e,{throwQuotaErrorsOnSet:!1},window,JSON.parse,JSON.stringify)}},86283:(e,t,r)=>{r.d(t,{Qg:()=>n.Qg,W6:()=>n.W6,cF:()=>n.cF,iG:()=>a.iG,jX:()=>a.jX,n4:()=>a.n4,zu:()=>a.zu});var n=r(35647),a=r(73614)},73614:(e,t,r)=>{r.d(t,{iG:()=>a,jX:()=>o,n4:()=>n,zu:()=>i});let n="undefined"==typeof document?void 0:document,a="undefined"==typeof window?void 0:window,i="undefined"==typeof history?void 0:history,o="undefined"==typeof location?{pathname:"",origin:"",search:"",hash:""}:location},35647:(e,t,r)=>{r.d(t,{Qg:()=>i,W6:()=>a,cF:()=>o});var n=r(73614);let a=void 0===n.n4,i=!a;function o(){return!!a||Boolean(n.n4.querySelector('react-app[data-ssr="true"]'))}},71643:(e,t,r)=>{r.d(t,{B:()=>p,b:()=>s});var n=r(86283),a=r(4412),i=r(53729);let o=[];function s(e,t=!1){void 0===e.timestamp&&(e.timestamp=new Date().getTime()),e.loggedIn=m(),e.staff=p(),e.bundler=i.A7,o.push(e),t?u():c()}let l=null;async function c(){await a.C,null==l&&(l=window.requestIdleCallback(u))}function u(){if(l=null,!o.length)return;let e=n.n4?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(!e)return;let t=d(o);for(let r of t)f(e,`{"stats": [${r.join(",")}] }`);o=[]}function d(e){let t=[],r=e.map(e=>JSON.stringify(e));for(;r.length>0;)t.push(h(r));return t}function h(e){let t=e.shift(),r=[t],n=t.length;for(;e.length>0&&n<=65536;){let t=e[0].length;if(n+t<=65536){let a=e.shift();r.push(a),n+=t}else break}return r}function f(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}function m(){return!!n.n4?.head?.querySelector('meta[name="user-login"]')?.content}function p(){return!!n.n4?.head?.querySelector('meta[name="user-staff"]')?.content}n.n4?.addEventListener("pagehide",u),n.n4?.addEventListener("visibilitychange",u)},15205:(e,t,r)=>{function n(...e){return JSON.stringify(e,(e,t)=>"object"==typeof t?t:String(t))}function a(e,t={}){let{hash:r=n,cache:a=new Map}=t;return function(...t){let n=r.apply(this,t);if(a.has(n))return a.get(n);let i=e.apply(this,t);return i instanceof Promise&&(i=i.catch(e=>{throw a.delete(n),e})),a.set(n,i),i}}r.d(t,{Z:()=>a})}}]);
//# sourceMappingURL=app_components_github_feature-callout-element_ts-10761e53f228.js.map